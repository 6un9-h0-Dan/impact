/*!
 * Start Bootstrap - ML CO2 Impact v5.0.8 ()
 * Copyright 2013-2019 
 * Licensed under MIT (https://github.com/BlackrockDigital/ml-co2-impact/blob/master/LICENSE)
 */

"use strict";function asyncGeneratorStep(t,e,r,a,n,o,u){try{var s=t[o](u),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(a,n)}function _asyncToGenerator(s){return function(){var t=this,u=arguments;return new Promise(function(e,r){var a=s.apply(t,u);function n(t){asyncGeneratorStep(a,e,r,n,o,"next",t)}function o(t){asyncGeneratorStep(a,e,r,n,o,"throw",t)}n(void 0)})}}var parseProvidersData=function(t){var e={},r=!0,a=!1,n=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c=s.provider,i=s.region,p=s.regionName,v=s.country,l=s.state,f=s.city,y=s.impact,d=s.source,g=s.comment,m=s.providerName,h=s.offsetRatio;null!=c&&1e5,c in e||(e[c]={}),e[c][i]={regionName:p,country:v,state:l,city:f,source:d,comment:g,providerName:m,offsetRatio:h,impact:parseFloat(y)}}}catch(t){a=!0,n=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw n}}return e},parseGPUData=function(t){var e={},r=1e6,a=!0,n=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var c=u.value,i=c.name,p=c.watt;e[i]={watt:parseFloat(p)},parseFloat(p)<r&&(r=parseFloat(p))}}catch(t){n=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return e};function getProvidersData(){return _getProvidersData.apply(this,arguments)}function _getProvidersData(){return(_getProvidersData=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$.ajax({type:"GET",url:"/data/impact.csv",dataType:"text"});case 3:return e=t.sent,t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}))).apply(this,arguments)}function getGPUData(){return _getGPUData.apply(this,arguments)}function _getGPUData(){return(_getGPUData=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$.ajax({type:"GET",url:"/data/gpus.csv",dataType:"text"});case 3:return e=t.sent,t.abrupt("return",e);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}))).apply(this,arguments)}function getData(){return _getData.apply(this,arguments)}function _getData(){return(_getData=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,getProvidersData();case 2:return e=t.sent,t.next=5,getGPUData();case 5:return r=t.sent,t.abrupt("return",{providers:parseProvidersData($.csv.toObjects(e)),gpus:parseGPUData($.csv.toObjects(r))});case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}